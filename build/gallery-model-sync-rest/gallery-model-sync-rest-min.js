YUI.add("gallery-model-sync-rest",function(h){var b,e=h.Lang,d=e.sub,g=e.isValue,a=e.isString,c=e.isNumber,f=e.isFunction;b=function(){};b.HTTP_METHODS={"create":"POST","read":"GET","update":"PUT","delete":"DELETE"};b.HTTP_HEADERS={"Accept":"application/json","Content-Type":"application/json"};b.EMULATE_HTTP=false;b.prototype={root:"",url:function(){var i=this.root,j;if(this instanceof h.ModelList||this.isNew()){return i;}j=this.getAsURL("id");if(i&&i.charAt(i.length-1)==="/"){j+="/";}return this._joinURL(j);},initializer:function(i){i||(i={});g(i.url)&&(this.url=i.url);},sync:function(m,k,p){k||(k={});var j=this._getURL(),o=b.HTTP_METHODS[m],n=h.merge(b.HTTP_HEADERS,k.headers),l=k.timeout||b.HTTP_TIMEOUT,i;if(o==="POST"||o==="PUT"){i=h.JSON.stringify(this);}else{delete n["Content-Type"];}if(b.EMULATE_HTTP&&(o==="PUT"||o==="DELETE")){n["X-HTTP-Method-Override"]=o;o="POST";}h.io(j,{method:o,headers:n,data:i,timeout:l,on:{success:function(r,q){if(f(p)){p(null,q.responseText);}},failure:function(r,q){if(f(p)){p({code:q.status,msg:q.statusText},q.responseText);}}}});},_getURL:function(){var i=this.url,j;if(f(i)){return this.url();}if(this instanceof h.Model){j={};h.Object.each(this.toJSON(),function(m,l){if(a(m)||c(m)){j[l]=encodeURIComponent(m);}});i=d(i,j);}return i||this.root;},_joinURL:function(j){var i=this.root;if(j.charAt(0)==="/"){j=j.substring(1);}return i&&i.charAt(i.length-1)==="/"?i+j:i+"/"+j;}};h.namespace("ModelSync").Rest=b;},"@VERSION@",{skinnable:false,requires:["io-base","json-stringify"]});