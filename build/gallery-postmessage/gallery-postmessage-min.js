YUI.add("gallery-postmessage",function(a){var h=a.Lang,g=h.isValue,b=h.isString,c=h.isFunction,i=a.JSON,f=i.stringify,e=i.parse,d=g(a.config.win.postMessage);a.postMessage=function(l,k,j){l=a.instanceOf(l,a.Node)?a.Node.getDOMNode(l):(l||a.config.win);k=b(k)?k:g(k)?f(k):null;j=j||"*";if(d){l.postMessage(k,j);}};a.Event.define("message",{processArgs:function(j,l){var k=b(j[2])?2:3;return{origin:b(j[k])||c(j[k])?j.splice(k,1)[0]:null};},on:function(l,j,k){var n=a.one("win");if(!(l===n||l===a.config.win)){return;}function m(t){var p=j._extra.origin,o=t._event,r=o.origin,s=o.data;try{s=e(s);}catch(q){}if(c(p)?p(r):(!p||p===r)){k.fire({origin:r,data:s});}}if(d){j.messageHandle=a.Event._attach(["message",m,n]);}},detach:function(l,j,k){if(d){j.messageHandle.detach();}}},true);},"@VERSION@",{requires:["event-synthetic","history-hash","json"]});