YUI.add("gallery-postmessage",function(g){var b=g.Lang,f=b.isValue,a=b.isString,e=g.JSON,h=e.stringify,d=e.parse,c=f(g.config.win.postMessage);g.postMessage=function(k,j,i){k=g.instanceOf(k,g.Node)?g.Node.getDOMNode(k):(k||g.config.win);j=a(j)?j:f(j)?h(j):null;i=i||"*";if(c){k.postMessage(j,i);}};g.Event.define("message",{processArgs:function(j,l){var k=a(j[2])?2:3;return{origin:a(j[k])?j.splice(k,1)[0]:null};},on:function(k,i,j){var m=g.one("win");if(k!==m){return;}function l(s){var o=i._extra.origin,n=s._event,q=n.origin,r=n.data;try{r=d(r);}catch(p){}if(!o||o===q){j.fire({origin:q,data:r});}}if(c){i.messageHandle=g.Event._attach(["message",l,m]);}},detach:function(k,i,j){if(c){i.messageHandle.detach();}}},true);},"@VERSION@",{requires:["event-synthetic","history-hash","json"]});